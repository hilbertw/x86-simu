#include <stdio.h>
#include <string.h>
#include "cpu.h"
#include "util.h"
#include "log.h"
void CCPU::addpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::addps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::addsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::addss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::addsubpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::addsubps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::andnpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::andnps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::andpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::andps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::blendpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::blendps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::blendvpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::blendvps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cmppd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cmpps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::comisd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::comiss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtdq2ps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtpd2dq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtpd2pi_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtpd2ps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtpi2pd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtpi2ps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtps2dq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtps2pd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtps2pi_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtsd2si_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtsd2ss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtsi2sd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtsi2ss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtss2sd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvtss2si_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttpd2dq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttpd2pi_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttps2dq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttps2pi_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttsd2si_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::cvttss2si_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::divpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::divps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::divsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::divss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::dppd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::dpps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::extractps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::haddpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::haddps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::hsubpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::hsubps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::insertps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::lddqu_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maskmovdqu_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maskmovq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maxpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maxps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maxsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::maxss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::minpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::minps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::minsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::minss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movapd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	// advapi32.dll
	//
	// xmm,xmm/m128
	//
	if(p_insn_exec_info->flag&EXEC_F_DIR)
	{
		if(p_insn_exec_info->r_m.type==0)
			write_string(p_insn_exec_info->r_m.operand_desc.mem,
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				16,
				32);
		else
			memcpy((char *)&reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no],
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				16);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);
	}
	else
	{
		if(p_insn_exec_info->r_m.type==0)
		read_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
			16,
			32);
		else
			memcpy(
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				(char *)&reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no],
				16);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);

	}	
}
void CCPU::movaps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//
	// xmm,xmm/m128
	//
	if(p_insn_exec_info->flag&EXEC_F_DIR)
	{
		if(p_insn_exec_info->r_m.type==0)
			write_string(p_insn_exec_info->r_m.operand_desc.mem,
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				16,
				32);
		else
			memcpy((char *)&reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no],
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				16);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);
	}
	else
	{
		if(p_insn_exec_info->r_m.type==0)
		read_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
			16,
			32);
		else
			memcpy(
				(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
				(char *)&reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no],
				16);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);

	}
}
void CCPU::movd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//
	// xmm, rm32
	//
	if((p_insn_exec_info->flag& EXEC_F_DIR))
	{
		update_reg(p_insn_exec_info->reg,
			reg_file.mmx_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0]);
	}
	else
	{
		memset(reg_file.mmx_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].b,0,128); 

		reg_file.mmx_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0]
		= reg_file.read_reg(p_insn_exec_info->reg);
	}
}
void CCPU::movddup_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movdq2q_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movdqa_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movdqu_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movhlps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movhpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movhps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movlhpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movlhps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movlpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movlps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movmskpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movmskps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movndq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movntdqa_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movnti_(PINSN_EXEC_INFO p_insn_exec_info)
{
	// m32,r32
	write_string(p_insn_exec_info->r_m.operand_desc.mem,
		(char *)reg_file.reg32[p_insn_exec_info->reg.reg_no],
		4,
		32);
}
void CCPU::movntpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	// m128,xmm
		write_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
			16,
			32);
}
void CCPU::movntps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	// m128,xmm
		write_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].b,
			16,
			32);
}
void CCPU::movntq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//char buffer[100];
	write_string(p_insn_exec_info->r_m.operand_desc.mem,
		(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b,
		8,
		32);

	//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);
	//log("movntq:%s\n",buffer);			
}
void CCPU::movq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//bug();
		//char buffer[100];
	if(p_insn_exec_info->flag&EXEC_F_DIR)
	{
		write_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b,
			8,
			32);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);
	}
	else
	{

		read_string(p_insn_exec_info->r_m.operand_desc.mem,
			(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b,
			8,
			32);
		//sprint_mem32(buffer,0,(char *)reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].b, 8);

	}
		//log("movq:%s\n",buffer);
}
void CCPU::movq2dq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movshdup_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movsldup_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movupd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::movups_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::mpsadbw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::mulpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::mulps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::mulsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::mulss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::orpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::orps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::packssdw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::packsswb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::packuswb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddsb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddsw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddusb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddusw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::paddw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pand_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pandn_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pavgb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pavgw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpeqb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpeqd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpeqw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpgtb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpgtd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pcmpgtw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pextrw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pinsrw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmaddwd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmaxsw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmaxub_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pminsw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::PMINUB_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmovmskb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmulhuw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmullhw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmulludq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pmullw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::por_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::ppushd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::PREFETCHT0_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::PREFETCHT1_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::PREFETCHT2_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::PREFETCHTA_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psadbw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pshufhw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pshuflw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pshufw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pslld_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pslldq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psllq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psllw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psrad_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psraw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psrldq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubsb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubsw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubusb_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubusw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::psubw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpckhbw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpckhdq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpckhqdq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpckhwd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpcklbw_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpckldq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpcklqdq_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::punpcklwd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::pxor_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//char m[16];
	if((p_insn_exec_info->op_presence&OP_PRESENCE_RM_R)==OP_PRESENCE_RM_R)
	{
		if(p_insn_exec_info->reg.reg_cat==RC_REGMMX)
		{
		reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= reg_file.mmx_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0];
		reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= reg_file.mmx_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[1];
		}
		else
		{
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[1];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[2]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[2];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[3]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[3];
		}


	}
	else
	{
		unsigned long l[4];
		read_string(p_insn_exec_info->r_m.operand_desc.mem,(char *)&l[0],16,0x20);
		if(p_insn_exec_info->reg.reg_cat==RC_REGMMX)
		{
		reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= l[0];
		reg_file.mmx_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= l[1];
		}
		else
		{
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= l[0];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= l[1];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[2]
		^= l[2];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[3]
		^= l[3];
		}


	}
}
void CCPU::rcpps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::rcpss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::rsqrtps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::rsqrtss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::shufpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::shufps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::sqrtps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::sqrtsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::sqrtss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::subpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::subps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::subsd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::subss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::ucomisd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::ucomiss_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::unpckhpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::unpckhps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::unpcklpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::unpcklps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	bug();
}
void CCPU::xorpd_(PINSN_EXEC_INFO p_insn_exec_info)
{
	if((p_insn_exec_info->op_presence&OP_PRESENCE_RM_R)==OP_PRESENCE_RM_R)
	{
		assert(p_insn_exec_info->reg.reg_cat==RC_REGXMM);
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[1];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[2]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[2];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[3]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[3];
	}
	else
	bug();
}
void CCPU::xorps_(PINSN_EXEC_INFO p_insn_exec_info)
{
	//char m[16];
	if((p_insn_exec_info->op_presence&OP_PRESENCE_RM_R)==OP_PRESENCE_RM_R)
	{
		assert(p_insn_exec_info->reg.reg_cat==RC_REGXMM);
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[0]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[0];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[1]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[1];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[2]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[2];
		reg_file.xmm_reg[p_insn_exec_info->reg.reg_no].l[3]
		^= reg_file.xmm_reg[p_insn_exec_info->r_m.operand_desc.reg.reg_no].l[3];
	}
	else
	bug();
}
